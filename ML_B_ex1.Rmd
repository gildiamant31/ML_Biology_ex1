---
title: "ML_B_ex1"
author: "itamar_living in dream, Yishay is donkey"
date: "29 3 2022"
output: pdf_document
---


here some intrduction
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE, fig.width=8, fig.height=3)
```

import the dataset to a local variable:
```{r include = FALSE}
library(ggplot2) # load the ggplot2 library
library(dplyr)
library(tidyverse)
surveys <- read_csv("netflix-rotten-tomatoes-metacritic-imdb.csv")
```

Some information is already known to us just from calling the table. We know how many rows and columns there are, and we have some idea regarding the type of variables (text, numeric) but not much else.

A few commands to help us learn more about the structure of the data are shown here:

```{r}
dim(surveys)
nrow(surveys) # already in dim
ncol(surveys) # already in dim 

head(surveys) # remove output too long
tail(surveys) # remove output too long

names(surveys)  

str(surveys) # remove output too long
summary(surveys) # remove output too long
```

רעיונות לגרפים

בדיקה של הכנסות לפי ז'אנרים

השוואה בין סוגי הדירוג השונים

מבקרים מול ציון סופי


עליה בסוגים של ז'אנרים לפי שנה 

כמות הצבעות לגובה ציון

כמות פרסים לגובה ציון ולכמות הצבעות


ספירת מספר מופעים של תוכן

אורך לפי שפה 

הכנסות סרט מול סדרה


פקודות שימושיות 
```{r}

#הפרדת עמודה לכמה עמודות
surveys_fixed <- surveys %>% separate(`Release Date`, c("day", "month", "year"), sep = " ", convert = TRUE)
surveys_fixed$`Netflix Release Date` <- as.Date(surveys$`Netflix Release Date`)
surveys_fixed$Boxoffice = gsub("\\$", "", surveys_fixed$Boxoffice)
surveys_fixed$Boxoffice = gsub("\\,", "", surveys_fixed$Boxoffice)
surveys_fixed$Boxoffice = as.numeric(surveys_fixed$Boxoffice)
# לפרסר למספרי את הערך של זמן הסרט
surveys$Runtime[surveys$Runtime == "1-2 hour"] <- "1.5"
surveys$Runtime[surveys$Runtime == "< 30 minutes"] <- "0.5"
surveys$Runtime[surveys$Runtime == "> 2 hrs"] <- "2"
surveys$Runtime[surveys$Runtime == "30-60 mins"] <- "1"
#surveys$Runtime <- as.numeric(surveys$Runtime)


# בחירת עמודות- סתם דוגמאות
#surveys_selected <- select(surveys, where(is.numeric))
#surveys_selected <- select(surveys, !starts_with("Link"))

# בחירת שורות סתם דוגמאות 
#surveys_selected <- surveys %>% filter( grepl("Action", Genre) & `Series or Movie` == "Movie")

# הורדת שורות עם NA
surveys <- subset(surveys, !is.na(Runtime))

# ספירת מספר מופעים של תוכן
surveys %>% group_by(Runtime) %>%  tally(sort = TRUE)




```

## Data Variation

One important fact to know about our data is its variation, can you think of reasons why? 

hidden gems 
זה מדד בשביל לאתר סרטים טובים ולא מוכרים - סרט מקבל ציון גבוה אם יש לו קצת הצבעות אבל עם ציונים גבוהים

IMDb Score, Rotten Tomatoes Score, Metacritic Score
זה ציונים לסרט מ3 אתרים שונים - אין בניהם הבדל מהותי

```{r}

# אפשר לומר שיש פה 2 קבוצות - כאלה עם ממש מעט הצבעות וציון לא משהו וכאלה שבאמת יש להם ציון טוב
# plotting a scatter plot 
ggplot(data = surveys,  aes(y = `Hidden Gem Score`, x= `IMDb Score`)) +
  geom_point() + theme_classic()

one_lan <- surveys %>% filter(Languages=="English" | Languages=="Japanese" | Languages=="Korean" | Languages=="Spanish" | Languages=="Hindi" | Languages=="French" | Languages=="German")

ggplot(data = one_lan, aes(x=Languages, y=Runtime)) + geom_count()


# creating boxplot
ggplot(data = surveys, mapping = aes(x = `IMDb Score`, y = `Hidden Gem Score`)) + 
  geom_boxplot(mapping = aes(group = cut_width(`IMDb Score`, 0.1)))

# Variance between two categorical variables
ggplot(data = surveys) +
  geom_count(mapping = aes(x = "IMDb Score", y = Genre))

```


## Data Visualisation - 

```{r}
ggplot(data = surveys) +
  geom_bar(mapping = aes(x = Genre))


surveys$`Hidden Gem Score` <- as.numeric(surveys$`Hidden Gem Score`)
ggplot(data = surveys) +
  geom_histogram(mapping = aes(x = `Hidden Gem Score`), binwidth = 0.5)

ggplot(data = surveys , color = Runtime) + 
  geom_bar(mapping = aes(x = Runtime, fill = Runtime))

```


